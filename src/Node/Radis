; ğŸ”¥ What is Redis?

; Redis (Remote Dictionary Server) is an open-source, in-memory data store that can act as a:
; 	â€¢	Database (stores key-value pairs)
; 	â€¢	Cache (super-fast data retrieval)
; 	â€¢	Message broker (pub/sub for real-time communication)

; Because Redis keeps data in RAM, itâ€™s extremely fast (sub-millisecond latency). You can also persist data to disk if needed.

; â¸»

; âœ… Why Redis is Used?
; 	1.	Caching â†’ Store frequently accessed data (API results, sessions) â†’ reduces load on main DB.
; 	2.	Session Management â†’ Store user sessions (tokens, cart items) for quick access.
; 	3.	Rate Limiting â†’ Count API requests per user/IP â†’ block if limit exceeded.
; 	4.	Pub/Sub (Messaging) â†’ Real-time notifications, chat systems.
; 	5.	Queues / Task Management â†’ Background jobs (Bull, Celery).

; â¸»

; âœ… Redis Data Structures

; Redis is not just key-value strings. It supports:
; 	â€¢	Strings â†’ "user:1" : "Srikanth"
; 	â€¢	Hashes â†’ { id:1, name:"Srikanth", age:25 }
; 	â€¢	Lists â†’ Like a linked list (LPUSH, RPUSH)
; 	â€¢	Sets â†’ Unique values (SADD, SMEMBERS)
; 	â€¢	Sorted Sets â†’ Ranking systems (leaderboards).

; â¸»

; âœ… Example Use Cases (with Node.js)

; 1. Caching API Responses
; import express from 'express';
; import fetch from 'node-fetch';
; import { createClient } from 'redis';

; const app = express();
; const redisClient = createClient();
; await redisClient.connect();

; // Middleware to check cache
; async function cache(req, res, next) {
;   const { id } = req.params;
;   const data = await redisClient.get(`post:${id}`);
;   if (data) {
;     return res.json(JSON.parse(data)); // serve from cache
;   }
;   next();
; }

; app.get('/posts/:id', cache, async (req, res) => {
;   const { id } = req.params;
;   const response = await fetch(`https://jsonplaceholder.typicode.com/posts/${id}`);
;   const post = await response.json();
;   await redisClient.setEx(`post:${id}`, 3600, JSON.stringify(post)); // cache for 1 hr
;   res.json(post);
; });

; app.listen(3000, () => console.log("Server running on 3000"));
; â¡ï¸ First request â†’ fetches from API + stores in Redis.
; â¡ï¸ Next requests â†’ served instantly from Redis.

; â¸»

; 2. Rate Limiter (Protect API)
; async function rateLimiter(req, res, next) {
;   const ip = req.ip;
;   const requests = await redisClient.incr(ip);

;   if (requests === 1) {
;     await redisClient.expire(ip, 60); // reset after 60s
;   }

;   if (requests > 5) {
;     return res.status(429).send("Too many requests, try again later.");
;   }

;   next();
; }

; app.use(rateLimiter);
; async function rateLimiter(req, res, next) {
;   const ip = req.ip;
;   const requests = await redisClient.incr(ip);

;   if (requests === 1) {
;     await redisClient.expire(ip, 60); // reset after 60s
;   }

;   if (requests > 5) {
;     return res.status(429).send("Too many requests, try again later.");
;   }

;   next();
; }

; app.use(rateLimiter);